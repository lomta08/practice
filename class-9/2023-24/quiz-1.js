let timerInterval;
let timeLeft = 3 * 60 * 60; // 3 Hours 

function startQuiz(withTimer) {
  document.getElementById("mode-selection").style.display = "none";
  const quizForm = document.getElementById("quizForm");
  quizForm.style.display = "block";

  if (withTimer) {
    document.getElementById("timer").style.display = "block";
    updateTimerDisplay();
    timerInterval = setInterval(() => {
      timeLeft--;
      updateTimerDisplay();
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        alert("áƒ“áƒ áƒ áƒáƒ›áƒáƒ˜áƒ¬áƒ£áƒ áƒ! áƒ¥áƒ•áƒ˜áƒ–áƒ˜ áƒ“áƒáƒ¡áƒ áƒ£áƒšáƒ”áƒ‘áƒ£áƒšáƒ˜áƒ.");
        quizForm.requestSubmit(); // safely submits even if clicked from code
      }
    }, 1000);
  }
}

function updateTimerDisplay() {
    const hours = String(Math.floor(timeLeft / 3600)).padStart(2, "0");
    const minutes = String(Math.floor((timeLeft % 3600) / 60)).padStart(2, "0");
    const seconds = String(timeLeft % 60).padStart(2, "0");
    document.getElementById("time").textContent = `${hours}:${minutes}:${seconds}`;
}


const quizData = [
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\( y = -10x^2 - 30x - 5 \\) áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒ áƒáƒ¤áƒ˜áƒ™áƒ˜ áƒ¡áƒáƒ™áƒáƒ áƒ“áƒ˜áƒœáƒáƒ¢áƒ áƒ¡áƒ˜áƒ‘áƒ áƒ¢áƒ§áƒ˜áƒ¡ áƒ áƒáƒ›áƒ”áƒš áƒ›áƒ”áƒáƒ—áƒ®áƒ”áƒ“áƒ¨áƒ˜ áƒáƒ  áƒ’áƒáƒ“áƒ˜áƒ¡.',
    options: ['I', 'II', 'III', 'IV', 'I áƒ“áƒ II', 'áƒáƒ¡áƒ”áƒ—áƒ˜ áƒ›áƒ”áƒáƒ—áƒ®áƒ”áƒ“áƒ˜ áƒáƒ  áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ‘áƒ¡'],
    correct: 0,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\( y = -x^2 + 5x - 2 \\), áƒ¡áƒáƒ“áƒáƒª \\( x âˆˆ [-1; 2] \\) áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ£áƒ“áƒ˜áƒ“áƒ”áƒ¡áƒ˜ áƒ“áƒ áƒ£áƒ›áƒªáƒ˜áƒ áƒ”áƒ¡áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ¯áƒáƒ›áƒ˜.',
    options: ['$âˆ’4$', '$6.25$', '$âˆ’8$', '$2.5$', '$âˆ’4.25$', 'áƒ¨áƒ”áƒ£áƒ«áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ áƒ“áƒáƒ“áƒ’áƒ”áƒœáƒ'],
    correct: 0,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: `áƒ¥áƒ•áƒ”áƒ›áƒáƒ— áƒ©áƒáƒ›áƒáƒ—áƒ•áƒšáƒ˜áƒšáƒ˜ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ”áƒ‘áƒ˜áƒ“áƒáƒœ áƒ áƒáƒ›áƒ”áƒšáƒ˜ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒáƒ áƒ˜áƒ¡ áƒšáƒ£áƒ¬áƒ˜ áƒáƒœ áƒ™áƒ”áƒœáƒ¢áƒ˜?\n\nI. \\( y = -x^2 - 3|x| + 2 \\)\nII. \\( y = -2x + 1 \\)\nIII. \\( y = |x^2 - 3x| \\)\nIV. \\( y = -x^2 + |x - 2| \\)`,
    options: ['I áƒ“áƒ II', 'I áƒ“áƒ III', 'áƒ›áƒ®áƒáƒšáƒáƒ“ I', 'I áƒ“áƒ IV', 'II áƒ“áƒ III', 'áƒáƒ—áƒ®áƒ˜áƒ•áƒ”'],
    correct: 2,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒ áƒ˜áƒ¡áƒ˜ áƒ¢áƒáƒšáƒ˜áƒ áƒ¢áƒáƒšáƒ’áƒ•áƒ”áƒ áƒ“áƒ áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜, áƒ—áƒ£ áƒ¨áƒ”áƒ›áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜ áƒ“áƒ áƒ©áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜ áƒ¬áƒ áƒ”áƒ¬áƒ˜áƒ áƒ—áƒ áƒ áƒáƒ“áƒ˜áƒ£áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ®áƒ•áƒáƒáƒ‘áƒ 1-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ.',
    options: ['$\\sqrt{6}$', '$2\\sqrt{3}', '$6$', '$ 2\\sqrt{6} $', '\\3\\sqrt{3} $', '$4 \\sqrt{3} $'],
    correct: 4,
    tags: ['áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜']
  },
  {
    question: 'áƒáƒ—áƒ®áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ¨áƒ˜ áƒ“áƒ˜áƒáƒ’áƒáƒœáƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ’áƒáƒ¢áƒáƒ áƒ”áƒ‘áƒ˜áƒ¡áƒáƒ¡ áƒ›áƒ˜áƒ¦áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒáƒ—áƒ®áƒ˜ áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ“áƒáƒœ áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒ¦áƒáƒª áƒ¡áƒáƒ›áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜áƒ 80; 32 áƒ“áƒ 128. áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒ áƒ áƒ£áƒ›áƒªáƒ˜áƒ áƒ”áƒ¡áƒ˜ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜ áƒ¨áƒ”áƒ˜áƒ«áƒšáƒ”áƒ‘áƒ áƒ¥áƒáƒœáƒ“áƒ”áƒ¡ áƒáƒ› áƒáƒ—áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ¡?',
    options: ['$560$', '$256$', '$291.2$', '$300$', '$250$', '$260$'],
    correct: 5,
    tags: ['áƒ’áƒ”áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\(x\\)-áƒ˜áƒ¡ áƒ§áƒ•áƒ”áƒšáƒ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ, áƒ áƒáƒ›áƒšáƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡áƒáƒª \\( -x^2 - 2x + 3 \\) áƒ“áƒ \\( x^2 + x + 1 \\) áƒ’áƒáƒ›áƒáƒ¡áƒáƒ®áƒ£áƒšáƒ”áƒ‘áƒáƒ¡ áƒ”áƒ áƒ—áƒœáƒáƒ˜áƒ áƒ˜ áƒœáƒ˜áƒ¨áƒáƒœáƒ˜ áƒáƒ¥áƒ•áƒ¡.',
    options: ['\\(R\\) ', '\\(R âˆ– [âˆ’3; 1]\\) ', '(âˆ’1; 3) ', ' \\(R âˆ– [2; 3]\\) ', ' (âˆ’3; 1) ', ' âˆ… '],
    correct: 4,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\( c \\) áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ¡ áƒ§áƒ•áƒ”áƒšáƒ áƒ¨áƒ”áƒ¡áƒáƒ«áƒšáƒ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ, áƒ—áƒ£ \\( y = -x^2 + 4x + c \\), áƒ¡áƒáƒ“áƒáƒª \\( x âˆˆ (âˆ’âˆ; âˆ’1] \\) áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒáƒ—áƒ áƒ¡áƒ˜áƒ›áƒ áƒáƒ•áƒšáƒ”áƒ \\((-âˆ; âˆ’8]\\).',
    options: ['$ 4 $', '$ 2 $', '$ âˆ’8 $', '$ âˆ’3 $', '$ âˆ’12 $', '$ 3 $'],
    correct: 3,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\( a \\) áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ¡ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ, áƒ áƒáƒ›áƒšáƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡áƒáƒª \\( x^2 âˆ’ (a + 2)x + a + 1 = 0 \\) áƒ’áƒáƒœáƒ¢áƒáƒšáƒ”áƒ‘áƒ áƒáƒ¥áƒ•áƒ¡ áƒáƒ áƒ˜ áƒáƒ›áƒáƒœáƒáƒ®áƒ¡áƒœáƒ˜ áƒ“áƒ áƒ›áƒáƒ—áƒ˜ áƒ™áƒ•áƒáƒ“áƒ áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ¯áƒáƒ›áƒ˜ áƒáƒ¦áƒ¬áƒ”áƒ•áƒ¡ áƒ£áƒ›áƒªáƒ˜áƒ áƒ”áƒ¡ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒáƒ¡.',
    options: ['$ 2 $', '$ âˆ’1 $', '$ 3 $', '$ âˆ’2 $', '$ 1 $', '$ âˆ’3 $'],
    correct: 1,
    tags: ['áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜']
  },
  {
    question: 'ğ‘¨ğ‘©ğ‘ª áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ¨áƒ˜ ğ‘© áƒ™áƒ£áƒ—áƒ®áƒ” ğŸ‘ğŸÂ°-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ. áƒ’áƒáƒ•áƒšáƒ”áƒ‘áƒ£áƒšáƒ˜áƒ ğ‘¨ğ‘´ áƒ“áƒ ğ‘ªğ‘µ áƒ¡áƒáƒ›áƒáƒ¦áƒšáƒ”áƒ”áƒ‘áƒ˜. áƒ˜áƒáƒáƒ•áƒ”áƒ— ğ‘µğ‘©ğ‘´ áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜, áƒ—áƒ£ ğ‘¨ğ‘©ğ‘ª áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜ 24-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ.',
    options: ['$12$', '$8 \\sqrt{3}$', '$16$', '$ 9 $', '$ 12 \\sqrt{3} $', '$ 18 $'],
    correct: 5,
    tags: ['áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜']
  },
  {
    question: 'áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒáƒ áƒ˜ áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜áƒ¡ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ” 12-áƒ˜áƒ¡áƒ áƒ“áƒ 13-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ. áƒ áƒ˜áƒ¡áƒ˜ áƒ¢áƒáƒšáƒ˜áƒ áƒáƒ› áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ›áƒ”áƒ¡áƒáƒ›áƒ” áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜áƒ¡ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ”, áƒ—áƒ£ áƒ¨áƒ”áƒ›áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜ áƒ“áƒ áƒ©áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜ áƒ¬áƒ áƒ”áƒ¬áƒ˜áƒ áƒ—áƒ áƒ áƒáƒ“áƒ˜áƒ£áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒœáƒáƒ›áƒ áƒáƒ•áƒšáƒ˜ 28-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ?',
    options: ['$7\\sqrt{3}$', '$15$', '$14$', ' $7\\sqrt{5}$', '$11.5$', '$21$'],
    correct: 5,
    tags: ['áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒ áƒ˜áƒ¡áƒ˜ áƒ¢áƒáƒšáƒ˜áƒ \\(f(x) = ax^2 + bx + c\\) áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ–áƒ áƒ“áƒáƒ“áƒáƒ‘áƒ˜áƒ¡ áƒ¨áƒ£áƒáƒšáƒ”áƒ“áƒ˜, áƒ—áƒ£ áƒªáƒœáƒáƒ‘áƒ˜áƒšáƒ˜áƒ, áƒ áƒáƒ› \\(f(x) â‰¥ 0\\) áƒ£áƒ¢áƒáƒšáƒáƒ‘áƒ˜áƒ¡ áƒáƒ›áƒáƒœáƒáƒ®áƒ¡áƒœáƒ˜áƒ \\(x âˆˆ [âˆ’5; 1]\\).',
    options: ['$[âˆ’3; +\\infty)$', '$(âˆ’\\infty; âˆ’2]$', '$[âˆ’1; +\\infty)$', '$(âˆ’\\infty; 0]$', '$[âˆ’2; +\\infty)$', '$(âˆ’\\infty; âˆ’3]$'],
    correct: 1,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: 'áƒ áƒáƒ›áƒ“áƒ”áƒœáƒ˜ áƒáƒ áƒáƒ“áƒáƒ“áƒ”áƒ‘áƒ˜áƒ—áƒ˜ áƒ›áƒ—áƒ”áƒšáƒ˜ áƒáƒ›áƒáƒœáƒáƒ®áƒ¡áƒœáƒ˜ áƒáƒ¥áƒ•áƒ¡ \\(\\frac{(x^2+5xâˆ’14)(9âˆ’x^2)}{(x^2âˆ’2x+10)(x^3+3x^2)} â‰¤ 0\\) áƒ£áƒ¢áƒáƒšáƒáƒ‘áƒáƒ¡?',
    options: ['$5$', '$7$', '$4$', '$6$', '$9$', 'áƒ§áƒ•áƒ”áƒšáƒ áƒ¬áƒ˜áƒœáƒ áƒáƒáƒ¡áƒ£áƒ®áƒ˜ áƒ›áƒªáƒ“áƒáƒ áƒ˜áƒ'],
    correct: 3,
    tags: ['áƒáƒšáƒ’áƒ”áƒ‘áƒ áƒ']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\(f(f(x)) â‰¤ f(x)\\) áƒ£áƒ¢áƒáƒšáƒáƒ‘áƒ˜áƒ¡ áƒ›áƒ—áƒ”áƒš áƒáƒ›áƒáƒœáƒáƒ®áƒ¡áƒœáƒ—áƒ áƒ áƒáƒáƒ“áƒ”áƒœáƒáƒ‘áƒ, áƒ—áƒ£ \\(f(x) = x^2 âˆ’ x\\).',
    options: ['$4$', '$6$', '$7$', '$5$', '$9$', 'áƒáƒ áƒªáƒ”áƒ áƒ—áƒ˜'],
    correct: 0,
    tags: ['áƒ¨áƒ”áƒ›áƒ“áƒ’áƒ”áƒœáƒ˜áƒšáƒ˜ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: 'áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒáƒ áƒ˜ áƒ™áƒ£áƒ—áƒ®áƒ” ğŸ‘ğŸÂ°-áƒ˜áƒ¡áƒ áƒ“áƒ ğŸğŸğŸ“Â°-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ, áƒ£áƒ›áƒªáƒ˜áƒ áƒ”áƒ¡áƒ˜ áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜áƒ¡ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ” 2-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ. áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒáƒ› áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜.',
    options: ['$ \\sqrt{3} âˆ’ 1 $', '$ \\sqrt{3} $', '$ \\sqrt{3} + 1 $', '$ 2\\sqrt{3} $', '$ 2\\sqrt{3} + 1 $', '$2\\sqrt{6} $'],
    correct: 2,
    tags: ['áƒ’áƒ”áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ']
  },
  {
    question: 'áƒ›áƒáƒ áƒ—áƒ™áƒ£áƒ—áƒ®áƒ áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜ 30-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ. áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒáƒ› áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ°áƒ˜áƒáƒáƒ¢áƒ”áƒœáƒ£áƒ–áƒ˜áƒ¡ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ”, áƒ—áƒ£ áƒ›áƒáƒ¡áƒ¨áƒ˜ áƒ©áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜ áƒ¬áƒ áƒ”áƒ¬áƒ˜áƒ áƒ˜áƒ¡ áƒ áƒáƒ“áƒ˜áƒ£áƒ¡áƒ˜ 2-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ.',
    options: ['$12$', '$15$', '$6\\sqrt{3}$', '$13$', '$2\\sqrt{15}$', '$9$'],
    correct: 3,
    tags: ['áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜']
  },
  {
    question: '$ğ’š = ğ’‡(ğ’™)$ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ $ğ’ğ’™$ áƒ¦áƒ”áƒ áƒ«áƒ¡ áƒ™áƒ•áƒ”áƒ—áƒ¡ 12 áƒ¬áƒ”áƒ áƒ¢áƒ˜áƒšáƒ¨áƒ˜, áƒ›áƒáƒ— áƒ¨áƒáƒ áƒ˜áƒ¡ áƒ™áƒáƒ áƒ“áƒ˜áƒœáƒáƒ¢áƒ—áƒ áƒ¡áƒáƒ—áƒáƒ•áƒ”áƒ¨áƒ˜. áƒ™áƒ•áƒ”áƒ—áƒ˜áƒ¡ áƒ¬áƒ”áƒ áƒ¢áƒ˜áƒšáƒ”áƒ‘áƒ˜áƒ“áƒáƒœ 7 áƒ¬áƒ”áƒ áƒ¢áƒ˜áƒšáƒ¡ ğ’™ áƒ™áƒáƒ áƒ“áƒ˜áƒœáƒáƒ¢áƒ˜ áƒ£áƒáƒ áƒ§áƒáƒ¤áƒ˜áƒ—áƒ˜ áƒáƒ¥áƒ•áƒ—. áƒ˜áƒáƒáƒ•áƒ”áƒ— \\(f(|x|) = 0\\) áƒ’áƒáƒœáƒ¢áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒáƒ›áƒáƒœáƒáƒ®áƒ¡áƒœáƒ—áƒ áƒ áƒáƒáƒ“áƒ”áƒœáƒáƒ‘áƒ.',
    options: ['$11$', '$7$', '$8$', '$10$', '$9$', 'áƒ¨áƒ”áƒ£áƒ«áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ áƒ“áƒáƒ“áƒ’áƒ”áƒœáƒ'],
    correct: 4,
    tags: ['áƒ›áƒáƒ“áƒ£áƒšáƒ˜']
  },
  {
    question: '$ğ’‡(ğ’™) = ğ’‚ğ’™^2 + ğ’ƒğ’™ + ğ’„ $ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒ áƒáƒ¤áƒ˜áƒ™áƒ˜ áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ‘áƒ $ğ’ˆ(ğ’™) = âˆ’ğ’™^2 + ğŸ’ğ’™ âˆ’ ğŸ‘$ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒ áƒáƒ¤áƒ˜áƒ™áƒ˜áƒ¡ áƒáƒ áƒ˜ áƒáƒáƒ áƒáƒšáƒ”áƒšáƒ£áƒ áƒ˜ áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ˜áƒ—. áƒ™áƒ”áƒ áƒ«áƒáƒ“ áƒáƒ‘áƒªáƒ˜áƒ¡áƒáƒ—áƒ áƒ¦áƒ”áƒ áƒ«áƒ˜áƒ¡ áƒ’áƒáƒ¡áƒ¬áƒ•áƒ áƒ˜áƒ• áƒ£áƒáƒ áƒ§áƒáƒ¤áƒ˜áƒ—áƒ˜ áƒ›áƒ˜áƒ›áƒáƒ áƒ—áƒ£áƒšáƒ”áƒ‘áƒ˜áƒ— 3 áƒ”áƒ áƒ—áƒ”áƒ£áƒšáƒ˜áƒ— áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ˜áƒ— áƒ“áƒ áƒáƒ áƒ“áƒ˜áƒœáƒáƒ¢áƒ—áƒ áƒ¦áƒ”áƒ áƒ«áƒ˜áƒ¡ áƒ’áƒáƒ¡áƒ¬áƒ•áƒ áƒ˜áƒ• áƒ“áƒáƒ“áƒ”áƒ‘áƒ˜áƒ—áƒ˜ áƒ›áƒ˜áƒ›áƒáƒ áƒ—áƒ£áƒšáƒ”áƒ‘áƒ˜áƒ— 4 áƒ”áƒ áƒ—áƒ”áƒ£áƒšáƒ˜áƒ— áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ˜áƒ—. áƒ˜áƒáƒáƒ•áƒ”áƒ— ğ’‚ + ğ’ƒ + ğ’„ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ.',
    options: ['$1$', '$2$', '$0$', '$âˆ’3$', '$2$', '$ âˆ’1$'],
    correct: 0,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ', 'áƒ’áƒ áƒáƒ¤áƒ˜áƒ™áƒ˜']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\(y = (x âˆ’ 1)(x âˆ’ 2)(x âˆ’ 3)(x âˆ’ 4) + 10\\) áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ£áƒ›áƒªáƒ˜áƒ áƒ”áƒ¡áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ.',
    options: ['$8$', '$0$', '$9$', '$10$', '$ âˆ’2$', '$ 1$'],
    correct: 2,
    tags: ['áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ']
  },
  {
    question: 'ABC áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ¨áƒ˜, áƒ áƒáƒ›áƒšáƒ˜áƒ¡ AC áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜áƒ¡ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ”áƒ 4 áƒ“áƒ BK áƒ¡áƒ˜áƒ›áƒáƒ¦áƒšáƒ” 3, áƒ©áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜áƒ áƒ›áƒáƒ áƒ—áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜, áƒ áƒáƒ›áƒšáƒ˜áƒ¡ áƒ”áƒ áƒ—-áƒ”áƒ áƒ—áƒ˜ áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜ áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ AC áƒ’áƒ•áƒ”áƒ áƒ“áƒ–áƒ”áƒ. áƒ áƒ áƒ£áƒ“áƒ˜áƒ“áƒ”áƒ¡áƒ˜ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜ áƒ¨áƒ”áƒ˜áƒ«áƒšáƒ”áƒ‘áƒ áƒ°áƒ¥áƒáƒœáƒ“áƒ”áƒ¡ áƒáƒ› áƒ›áƒáƒ áƒ—áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ¡?',
    options: ['áƒ)$ \\sqrt{7} $', '$3$', '$2.5$', '$ 2\\sqrt{3} $', '$ 3.5 $', '$ 4 $'],
    correct: 1,
    tags: ['áƒ’áƒ”áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ']
  },
  {
    question: 'ABCD áƒ áƒáƒ›áƒ‘áƒ¨áƒ˜ áƒ“áƒ˜áƒáƒ’áƒáƒœáƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ”áƒ”áƒ‘áƒ˜ áƒáƒ™áƒ›áƒáƒ§áƒáƒ¤áƒ˜áƒšáƒ”áƒ‘áƒ¡ áƒ¢áƒáƒšáƒáƒ‘áƒáƒ¡ 3AC + 4BC = 96. áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒ áƒáƒ›áƒ‘áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜áƒ¡ áƒ£áƒ“áƒ˜áƒ“áƒ”áƒ¡áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ.',
    options: ['$48$', '$144$', '$120$', '$96$', '$80$', '$ 160 $'],
    correct: 3,
    tags: ['áƒ áƒáƒ›áƒ‘áƒ˜']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\(f(g(x))\\) áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ£áƒ“áƒ˜áƒ“áƒ”áƒ¡áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ, áƒ—áƒ£ \\(f(x) = \\frac{1}{x}\\) áƒ“áƒ \\(g(x) = x^2 + 2x + 199\\).',
    options: ['\\(\\frac{1}{26}\\)', '$15$', '$ 1 $', '$ 0 $', ' \\(\\frac{1}{199}\\)', ' \\(\\frac{1}{198}\\)'],
    correct: 5,
    tags: ['áƒ¨áƒ”áƒ›áƒáƒ“áƒ’áƒ”áƒœáƒšáƒáƒ‘áƒ']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\(a\\) áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ¡ áƒ§áƒ•áƒ”áƒšáƒ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ, áƒ áƒáƒ›áƒšáƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡áƒáƒª \\(|âˆ’x^2 + 2|x| + 3| âˆ’ 1 = a\\) áƒ’áƒáƒœáƒ¢áƒáƒšáƒ”áƒ‘áƒáƒ¡ áƒáƒ¥áƒ•áƒ¡ áƒ–áƒ£áƒ¡áƒ¢áƒáƒ“ áƒ®áƒ£áƒ—áƒ˜ áƒáƒ›áƒáƒœáƒáƒ®áƒ¡áƒœáƒ˜.',
    options: ['$âˆ’3$', '$2$', '$âˆ’4$', '$5$', '$0$', '$ 1$'],
    correct: 1,
    tags: ['áƒ›áƒáƒ“áƒ£áƒšáƒ˜', 'áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜']
  },
  {
    question: 'áƒ˜áƒáƒáƒ•áƒ”áƒ— \\(p\\) áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ¡ áƒ áƒáƒ›áƒ“áƒ”áƒœáƒ˜ áƒœáƒáƒ¢áƒ£áƒ áƒáƒšáƒ£áƒ áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ‘áƒ¡, áƒ áƒáƒ›áƒ”áƒšáƒ—áƒáƒ—áƒ•áƒ˜áƒ¡áƒáƒª áƒ™áƒ•áƒáƒ“áƒ áƒáƒ¢áƒ£áƒšáƒ˜ \\(x^2 âˆ’ (2p + 1)x + p + p^2 = 0\\) áƒ’áƒáƒœáƒ¢áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ \\(x_1\\) áƒ“áƒ \\(x_2\\) áƒáƒ›áƒáƒœáƒáƒ®áƒ¡áƒœáƒ”áƒ‘áƒ˜ áƒáƒ™áƒ›áƒáƒ§áƒáƒ¤áƒ˜áƒšáƒ”áƒ‘áƒ”áƒœ \\(x_1^3 + x_2^3 âˆ’ 7x_1 âˆ’ 7x_2 â‰¤ 0\\) áƒáƒ˜áƒ áƒáƒ‘áƒáƒ¡.',
    options: ['$5$', '$1$', 'áƒáƒ áƒªáƒ”áƒ áƒ—áƒ˜', '$ 7 $', '$ 2 $', ' áƒ£áƒáƒ›áƒ áƒáƒ•áƒ˜'],
    correct: 4,
    tags: ['áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜']
  },
  {
    question: 'áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ¨áƒ˜ áƒ©áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜ áƒ¬áƒ áƒ”áƒ¬áƒ˜áƒ áƒ˜ áƒ¨áƒ”áƒ®áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒ”áƒ áƒ¢áƒ˜áƒšáƒ˜áƒ— áƒ”áƒ áƒ—-áƒ”áƒ áƒ— áƒ’áƒ•áƒ”áƒ áƒ“áƒ¡ áƒ§áƒáƒ¤áƒ¡ 4-áƒ˜áƒ¡áƒ áƒ“áƒ 6-áƒ˜áƒ¡ áƒ¢áƒáƒš áƒ›áƒáƒœáƒáƒ™áƒ•áƒ”áƒ—áƒ”áƒ‘áƒáƒ“. áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒáƒ› áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ£áƒ“áƒ˜áƒ“áƒ”áƒ¡áƒ˜ áƒ™áƒ£áƒ—áƒ®áƒ˜áƒ¡ áƒ¡áƒ˜áƒœáƒ£áƒ¡áƒ˜, áƒ—áƒ£ áƒáƒ› áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜ \\(24\\sqrt{6}\\)-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ.',
    options: ['\\(\\frac{3}{5}\\)', '\\(\\frac{2\\sqrt{6}}{5}\\)', '\\(\\frac{2}{3}\\)', '\\(\\frac{3\\sqrt{2}}{8}\\)', '\\(\\frac{4}{5}\\)', '\\(\\frac{2\\sqrt{3}}{7}\\)'],
    correct: 1,
    tags: ['áƒ¡áƒáƒ›áƒ™áƒ£áƒ—áƒ®áƒ”áƒ“áƒ˜']
  },
  {
    question: 'áƒáƒáƒ áƒáƒšáƒ”áƒšáƒáƒ’áƒ áƒáƒ›áƒ¨áƒ˜, áƒ áƒáƒ›áƒšáƒ˜áƒ¡ áƒ“áƒ˜áƒáƒ’áƒáƒœáƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ˜áƒ’áƒ áƒ«áƒ”áƒ”áƒ‘áƒ˜ 24-áƒ˜áƒ¡ áƒ“áƒ 18-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ, áƒ áƒáƒ›áƒ‘áƒ˜ áƒ˜áƒ¡áƒ”áƒ áƒ©áƒáƒ®áƒáƒ–áƒ£áƒšáƒ˜, áƒ áƒáƒ› áƒ›áƒ˜áƒ¡áƒ˜ áƒ’áƒ•áƒ”áƒ áƒ“áƒ”áƒ‘áƒ˜ áƒáƒáƒ áƒáƒšáƒ”áƒšáƒáƒ’áƒ áƒáƒ›áƒ˜áƒ¡ áƒ“áƒ˜áƒáƒ’áƒáƒœáƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒáƒáƒ áƒáƒšáƒ”áƒšáƒ£áƒ áƒ˜áƒ. áƒ˜áƒáƒáƒ•áƒ”áƒ— áƒáƒáƒ áƒáƒšáƒ”áƒšáƒáƒ’áƒ áƒáƒ›áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜, áƒ—áƒ£ áƒ áƒáƒ›áƒ‘áƒ˜áƒ¡ áƒ¤áƒáƒ áƒ—áƒáƒ‘áƒ˜ 48-áƒ˜áƒ¡ áƒ¢áƒáƒšáƒ˜áƒ.',
    options: ['$72$', '$120$', '$80$', '$112$', '$144$', '$98$'],
    correct: 5,
    tags: ['áƒáƒáƒ áƒáƒšáƒ”áƒšáƒáƒ’áƒ áƒáƒ›áƒ˜']
  }
];

 const form = document.getElementById("quizForm");
form.innerHTML = ""; // Clear previous content

quizData.forEach((q, i) => {
  const fieldset = document.createElement("fieldset");
  const legend = document.createElement("legend");
  legend.innerHTML = `<strong>${i + 1}.</strong><br>${q.question}`;
  fieldset.appendChild(legend);

  const feedback = document.createElement("div");
  feedback.className = "feedback";
  feedback.style.marginTop = "8px";

  q.options.forEach((opt, j) => {
    const label = document.createElement("label");
    const radio = document.createElement("input");
    radio.type = "radio";
    radio.name = `question${i}`;
    radio.value = j;
    label.appendChild(radio);
    label.append(` ${opt}`);
    fieldset.appendChild(label);
  });

  // Add Check button for individual question
  const checkBtn = document.createElement("button");
  checkBtn.type = "button";
  checkBtn.textContent = "áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ”";
  checkBtn.style.marginTop = "8px";

  checkBtn.addEventListener("click", () => {
    const selected = form.querySelector(`input[name="question${i}"]:checked`);
    if (!selected) {
      feedback.innerHTML = `<span style="color: orange;">áƒáƒáƒ¡áƒ£áƒ®áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒáƒ áƒ©áƒ”áƒ£áƒšáƒ˜</span>`;
    } else {
      const isCorrect = parseInt(selected.value) === q.correct;
      feedback.innerHTML = isCorrect
        ? `<span style="color: green;">âœ”ï¸ áƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ</span>`
        : `<span style="color: red;">âŒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ</span> â€“ áƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ: <strong>${q.options[q.correct]}</strong>`;
    }
    if (window.MathJax) MathJax.typeset(); // Re-render MathJax
  });

  fieldset.appendChild(checkBtn);
  fieldset.appendChild(feedback);
  form.appendChild(fieldset);
});

// Submit button and score display container
const submitBtn = document.createElement("button");
submitBtn.type = "button";
submitBtn.textContent = "áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ” áƒ§áƒ•áƒ”áƒšáƒ";
submitBtn.style.marginTop = "20px";
submitBtn.style.display = "block";

const scoreDisplay = document.createElement("div");
scoreDisplay.style.marginTop = "12px";
scoreDisplay.style.fontWeight = "bold";

submitBtn.addEventListener("click", () => {
  let score = 0;

  quizData.forEach((q, i) => {
    const selected = form.querySelector(`input[name="question${i}"]:checked`);
    const feedback = form.querySelectorAll(".feedback")[i];

    if (!selected) {
      feedback.innerHTML = `<span style="color: orange;">áƒáƒáƒ¡áƒ£áƒ®áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒáƒ áƒ©áƒ”áƒ£áƒšáƒ˜</span>`;
    } else {
      const isCorrect = parseInt(selected.value) === q.correct;
      if (isCorrect) score++;
      feedback.innerHTML = isCorrect
        ? `<span style="color: green;">âœ”ï¸ áƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ</span>`
        : `<span style="color: red;">âŒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ</span> â€“ áƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ: <strong>${q.options[q.correct]}</strong>`;
    }
  });

  scoreDisplay.innerHTML = `áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ“áƒáƒáƒ’áƒ áƒáƒ•áƒ”áƒ— ${score} áƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜ ${quizData.length}-áƒ“áƒáƒœ`;
  if (window.MathJax) MathJax.typeset();
});

form.appendChild(submitBtn);
form.appendChild(scoreDisplay);
form.addEventListener("submit", function (e) {
  e.preventDefault();
  
  if (timerInterval) {
    clearInterval(timerInterval);
  }
  
  let score = 0;
  const result = document.getElementById("result");
  result.innerHTML = "";

  const tagStats = {};

  quizData.forEach((q, i) => {
    const answer = form.querySelector(`input[name="question${i}"]:checked`);
    const fieldset = form.querySelectorAll("fieldset")[i];
    const explanation = document.createElement("div");

    const isCorrect = answer && parseInt(answer.value) === q.correct;
    if (isCorrect) score++;
    explanation.innerHTML = isCorrect
      ? `<span style="color: green;">Correct âœ”ï¸</span>`
      : `<span style="color: red;">Wrong âŒ</span> â€“ Correct answer: <strong>${q.options[q.correct]}</strong>`;
    q.tags.forEach(tag => {
      if (!tagStats[tag]) tagStats[tag] = { correct: 0, total: 0 };
      tagStats[tag].total++;
      if (isCorrect) tagStats[tag].correct++;
    });

    explanation.style.marginTop = "8px";
    fieldset.appendChild(explanation);
  });

  result.innerHTML = `<strong>Total Score: ${score} / ${quizData.length}</strong><br><h3>Score by Topic:</h3>`;
  for (let tag in tagStats) {
    const { correct, total } = tagStats[tag];
    const percentage = ((correct / total) * 100).toFixed(1);
    result.innerHTML += `<p>${tag}: ${correct} / ${total} (${percentage}%)</p>`;
  }

  form.querySelector("button").disabled = true;

  // Re-render math after result is shown
  if (window.MathJax) MathJax.typeset();
});
